/*
 * File:   init.c
 * Author: Fabian Castano
 *
 * Created on June 25, 2022, 13:41 PM
 */

/** ****************************************************************************
 ** ************ INCLUDES ******************************************************
 ** ****************************************************************************/
#include "init.h"

/** ****************************************************************************
 ** ************ DEFINES *******************************************************
 ** ****************************************************************************/

/** ****************************************************************************
 ** ************ EXTERN VARIABLES **********************************************
 ** ****************************************************************************/
extern xQueueHandle colaMensaje;
/** ****************************************************************************
 ** ************ VARIABLES *****************************************************
 ** ****************************************************************************/

/** ****************************************************************************
 ** ************ FUNCTIONS *****************************************************
 ** ****************************************************************************/

void escribe2(void *pvParameter)
{
    char cadena[8];
    while (1)
    {
        strcpy(cadena, "Tarea2\n");

        if (xQueueSendToBack(colaMensaje, &cadena, 2000 / portTICK_PERIOD_MS) != pdTRUE)
        { // 2seg--> Tiempo max. que la tarea está bloqueada si la cola está llena
            printf("error escribe2\n");
        }
        vTaskDelay(2000 / portTICK_PERIOD_MS);
    }
    vTaskDelete(NULL);
}

void escribe3(void *pvParameter)
{
    char cadena[8];
    while (1)
    {
        strcpy(cadena, "Tarea3\n");
        if (xQueueSendToBack(colaMensaje, &cadena, 2000 / portTICK_RATE_MS) != pdTRUE)
        {
            printf("error escribe3\n");
        }
        vTaskDelay(1000 / portTICK_RATE_MS);
    }
}

/** ****************************************************************************
 ** ************ END OF THE CODE ***********************************************
 ** ****************************************************************************/